dockerfile: |-
  RUN apk add --no-cache build-base git yaml-dev openssl-dev

script: &script |-
  echo -e "\e[1m"
  ruby -v
  echo -e "\e[0m"
  bundle install --jobs=$(getconf _NPROCESSORS_ONLN)
  bundle exec rake spec

fail_fast: true

before: |-
  echo ğŸ Preparingâ€¦
  echo Deleting Gemfile.lock
  rm -f Gemfile.lock

after: |-
  if [[ "$RESULT" = "1" ]]
  then
    echo ğŸ˜µ Some tests failed!
  else
    echo ğŸ¥³ All tests passed!
  fi
  echo Deleting Gemfile.lock
  rm -f Gemfile.lock


images:
  ruby:4.0-alpine: *script
  ruby:3.4-alpine: *script
  ruby:3.3-alpine: *script
  ruby:3.2-alpine: *script
  ruby:3.1-alpine: *script
